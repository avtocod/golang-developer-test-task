<p align="center">
  <img src="https://hsto.org/webt/ih/ds/fu/ihdsfuqni5apj0my18tnukzztw0.png" alt="Logo" width="128" />
</p>

# Тестовое задание для GoLang-разработчика

![Project language][badge_language]
[![Build Status][badge_build]][link_build]
[![Do something awesome][badge_use_template]][use_this_repo_template]

## Описание задания

Необходимо разработать приложение, предоставляющее HTTP API для получения данных о парковках такси в г. Москва. Данные необходимо брать с [этой страницы][dataset_link] ("Актуальная версия").

## Описание необходимого функционала

Приложение должно реализовывать:

- Функционал загрузки данных из файла _(локального и/или по ссылке)_ в хранилище данных _(данные на источнике могут как удаляться, так и добавляться)_;
- Обслуживание HTTP запросов к API-endpoints, которые реализуют поиск по хранимым данным;
- Обслуживание HTTP запросов к роуту, возвращающему метрические данные (в [формате prometheus][prometheus_format]) работы приложения.

> Обновление данных в хранилище должно происходить без остановки обслуживания HTTP запросов к API с учетом того, что их объем может быть _очень_ большим _(и маппинг данных на источнике может изменяться)_.

Методы HTTP API должны возвращать ответ в формате `json`. Время обработки одного запроса к HTTP API _(не загрузка данных в хранилище)_ - не более 2 мс. до первого байта HTTP ответа (TTFB). Проектирование самих методов API - на ваше усмотрение (минимально необходимый функционал - это поиск по `global_id`, `id` и `mode`).

Метрические данные должны включать в себя как минимум следующие метрики:

- Общее количество обработанных запросов к API-endpoints;
- Количество ошибок обработки HTTP запросов к API-endpoints _(плюсом будет "разведение" по различным кодам ответов)_;
- Данные по времени обработки HTTP запросов к API-endpoint;
- Дополнительные метрики, на ваше усмотрение.

## Требования к реализации

- В качестве хранилища данных необходимо использовать Redis;
- Все функции _(экспортируемые и не экспортируемые)_ должны сопровождаться понятным комментарием (если возможно - на английском языке);
- Не стоит излишне сокращать имена переменных и констант - код пишется для людей, и он должен быть максимально простым и понятным;
- Можно использовать любые сторонние пакеты, но не использовать какой-либо фреймворк;
- Весь ключевой функционал должен быть зафиксирован unit-тестами;
- После завершения работы над заданием необходимо написать сопроводительную документацию по работе с приложением в файле `README.md` в корне репозитория;
- Конфигурация параметров подключения к хранилищу данных должна иметь возможность управляться как флагами запуска, так и переменными окружения. Возможности конфигурирования должны быть описаны в файле `README.md` вашего репозитория.

## Плюсами будут являться

- Настройка CI _(силами GitHub actions, TravisCI, etc)_ выполняющая запуск тестов и сборки на каждый коммит;
- Автоматическая сборка Docker-образа с приложением;
- Интуитивно-понятное разбитие коммитов - одной конкретной задаче - один коммит или PR (её правки - отдельный коммит или PR);
- Написание всех текстов коммитов - на английском языке.

## Как начать выполнение тестового задания?

Для выполнения задания лучше всего использовать данный репозиторий как шаблон, для чего просто перейдите по [**этой ссылке**][use_this_repo_template].

Данный репозиторий уже содержит `Dockerfile`, `docker-compose.yml` и `Makefile` для быстрого запуска приложения силами `docker` _(нет необходимости устанавливать golang, redis и пр. локально)_. Всё, что необходимо - это установленные локально `docker` и `docker-compose`. После клонирования репозитория просто выполните `docker-compose up -d` - и можно приступать к написанию полезного кода.

## Результат выполнения

Ссылку на репозиторий с вашей реализацией необходимо отправить нашему HR или TeamLead, от которого вы получили ссылку на данный репозиторий.

Приложение должно успешно запускаться после выполнения:

```bash
$ git clone ...
$ make build
$ docker-compose up -d
$ docker-compose run --rm app ./app
```

> Если для запуска приложения потребуется другой набор команд - обязательно отразите это в файле `README.md` вашего репозитория.

Так же должны выполняться unit-тесты с помощью команды:

```bash
$ make test
# and optionally:
$ make cover
```

[badge_build]:https://github.com/avtocod/golang-developer-test-task/workflows/build/badge.svg
[badge_language]:https://img.shields.io/badge/language-go_1.13-blue.svg?longCache=true
[badge_use_template]:https://img.shields.io/badge/start-this_template_using-success.svg?longCache=true
[link_build]:https://github.com/avtocod/golang-developer-test-task/actions
[dataset_link]:https://data.gov.ru/opendata/7704786030-taxiparking
[prometheus_format]:https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md
[use_this_repo_template]:https://github.com/avtocod/golang-developer-test-task/generate
